<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - arcor</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M50,5 C60,20 80,30 85,50 C90,70 75,85 50,95 C25,85 10,70 15,50 C20,30 40,20 50,5Z' fill='%232e7d32'/></svg>">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f4f7f4 0%, #e8f4e8 100%);
            color: #333;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: white;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            padding: 30px 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 30px;
            border: 2px solid #8B7355;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 25px;
        }

        .logo {
            height: 100px;
            width: auto;
            background: white;
            padding: 10px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 3px solid #1F7A3E;
        }

        .header-text {
            flex: 1;
        }

        h1 {
            font-size: 36px;
            margin-bottom: 10px;
            color: #1F7A3E;
            font-weight: 800;
        }

        .subtitle {
            font-size: 18px;
            color: #666;
            font-weight: 500;
        }

        .empresa-info {
            background: #f8fff8;
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid #8B7355;
            text-align: right;
        }

        .empresa-nombre {
            font-size: 24px;
            font-weight: 700;
            color: #1F7A3E;
            margin-bottom: 10px;
        }

        .nivel-actual {
            font-size: 18px;
            color: #2e7d32;
            font-weight: 600;
        }

        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .kpi-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
            text-align: center;
            border-top: 6px solid #1F7A3E;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .kpi-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 25px rgba(0,0,0,0.12);
        }

        .kpi-icon {
            font-size: 35px;
            margin-bottom: 15px;
        }

        .kpi-card h3 {
            color: #124d2d;
            margin-bottom: 15px;
            font-size: 16px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .kpi-value {
            font-size: 40px;
            font-weight: 800;
            color: #1F7A3E;
            margin-bottom: 5px;
            line-height: 1;
        }

        .kpi-unit {
            color: #666;
            font-size: 14px;
        }

        .tendencia-positiva {
            color: #2ecc71;
            font-weight: bold;
        }

        .tendencia-negativa {
            color: #e74c3c;
            font-weight: bold;
        }

        .tendencia-neutral {
            color: #f39c12;
            font-weight: bold;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }

        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 18px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
            border: 1px solid #e8f4e8;
        }

        .chart-container h2 {
            color: #124d2d;
            margin-bottom: 20px;
            font-size: 20px;
            font-weight: 700;
        }

        .chart-wrapper {
            position: relative;
            height: 300px;
            width: 100%;
        }

        .metricas-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .metrica-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border-left: 4px solid #8B7355;
            transition: all 0.3s ease;
        }

        .metrica-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
        }

        .metrica-card h3 {
            color: #124d2d;
            margin-bottom: 15px;
            font-size: 16px;
            font-weight: 600;
        }

        .metrica-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .metrica-value {
            font-size: 28px;
            font-weight: 700;
            color: #8B7355;
        }

        .metrica-unit {
            color: #666;
            font-size: 14px;
        }

        .metrica-icon {
            font-size: 32px;
            color: #8B735580;
        }

        .evolucion-section {
            background: linear-gradient(135deg, #F5E6D3, white);
            padding: 30px;
            border-radius: 18px;
            margin-bottom: 40px;
            border: 2px solid #8B7355;
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
        }

        .evolucion-section h2 {
            color: #8B7355;
            margin-bottom: 20px;
            font-size: 22px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .evolucion-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .evolucion-stat {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .evolucion-stat h4 {
            color: #666;
            margin-bottom: 10px;
            font-size: 14px;
            font-weight: 600;
        }

        .evolucion-stat-value {
            font-size: 24px;
            font-weight: 700;
            color: #8B7355;
        }

        .footer {
            text-align: center;
            color: #888;
            font-size: 14px;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 1px solid #ddd;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 30px;
            border-radius: 15px;
            width: 80%;
            max-width: 600px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .close-modal {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close-modal:hover {
            color: #000;
        }

        .modal-details {
            margin-top: 20px;
            padding: 20px;
            background: #f8fff8;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <img class="logo"
                     src="https://res.cloudinary.com/ddubafael/image/upload/v1768315140/logo_institucional_final_tranp._impacta_verde_ec55yo.png"
                     alt="Impacta Verde">
                <div class="header-text">
                    <h1>üìä Dashboard de Sostenibilidad</h1>
                    <div class="subtitle">Seguimiento del impacto ambiental y social</div>
                </div>
            </div>
            <div class="empresa-info">
                <div class="empresa-nombre">arcor</div>
                <div class="nivel-actual">
                    üè® Hoteler√≠a | üåø Nivel Actual: Inicial
                </div>
                <div style="font-size: 14px; color: #888; margin-top: 10px;">
                    Actualizado: 03/02/2026
                </div>
            </div>
        </header>

        <!-- SECCI√ìN DE EVOLUCI√ìN -->
        <div class="evolucion-section">
            <h2>üìà Evoluci√≥n de la Empresa</h2>
            
            <div class="evolucion-stats">
                <div class="evolucion-stat">
                    <h4>Periodos Medidos</h4>
                    <div class="evolucion-stat-value">2</div>
                </div>
                <div class="evolucion-stat">
                    <h4>Puntaje Inicial</h4>
                    <div class="evolucion-stat-value">1.8%</div>
                </div>
                <div class="evolucion-stat">
                    <h4>Puntaje Actual</h4>
                    <div class="evolucion-stat-value">62.3%</div>
                </div>
                <div class="evolucion-stat">
                    <h4>Crecimiento</h4>
                    <div class="evolucion-stat-value tendencia-positiva">
                        60.5%
                    </div>
                </div>
            </div>
            
        </div>

        <div class="kpi-grid">
            <div class="kpi-card" onclick="mostrarDetalle('impacto')">
                <div class="kpi-icon">üìà</div>
                <h3>Impacto Promedio</h3>
                <div class="kpi-value">32.0%</div>
                <div class="kpi-unit">de sostenibilidad</div>
            </div>

            <div class="kpi-card" onclick="mostrarDetalle('co2')">
                <div class="kpi-icon">üåç</div>
                <h3>CO‚ÇÇe Evitado</h3>
                <div class="kpi-value">1.5</div>
                <div class="kpi-unit">toneladas totales</div>
            </div>

            <div class="kpi-card" onclick="mostrarDetalle('material')">
                <div class="kpi-icon">‚ôªÔ∏è</div>
                <h3>Material Recuperado</h3>
                <div class="kpi-value">0.4</div>
                <div class="kpi-unit">toneladas totales</div>
            </div>

            <div class="kpi-card" onclick="mostrarDetalle('evolucion')">
                <div class="kpi-icon">üöÄ</div>
                <h3>Tendencia</h3>
                <div class="kpi-value tendencia-positiva">
                    üìà Al alza
                </div>
                <div class="kpi-unit">de evoluci√≥n</div>
            </div>
        </div>

        <!-- M√âTRICAS INDIVIDUALES -->
        <div class="chart-container">
            <h2>üìã M√©tricas Clave de Sostenibilidad</h2>
            <div class="metricas-grid">
                
                <div class="metrica-card" style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                    <h3>M√©tricas en Proceso</h3>
                    <div class="metrica-content">
                        <div>
                            <div class="metrica-value">--</div>
                            <div class="metrica-unit">Cargando datos...</div>
                        </div>
                        <div class="metrica-icon">‚è≥</div>
                    </div>
                </div>
                
            </div>
        </div>

        <!-- GR√ÅFICOS INTERACTIVOS -->
        
        <div class="charts-grid">
            <div class="chart-container">
                <h2>üìà Evoluci√≥n de CO‚ÇÇe Evitado</h2>
                <div id="grafico-co2" style="height: 300px;"></div>
            </div>

            <div class="chart-container">
                <h2>üìä Evoluci√≥n del Puntaje de Sostenibilidad</h2>
                <div id="grafico-puntaje" style="height: 300px;"></div>
            </div>
        </div>
        

        <!-- M√ìDULOS DE SOSTENIBILIDAD -->
        <div class="charts-grid">
            <div class="chart-container">
                <h2>üçΩÔ∏è M√≥dulo de Eficiencia Operativa</h2>
                <div id="grafico-eficiencia" style="height: 250px;"></div>
            </div>

            <div class="chart-container">
                <h2>‚ôªÔ∏è M√≥dulo de Econom√≠a Circular</h2>
                <div id="grafico-circular" style="height: 250px;"></div>
            </div>
        </div>

        <div class="footer">
            <p>üìä Dashboard individual de arcor</p>
            <p>üåø Sistema Impacta Verde - Mediciones de sostenibilidad</p>
            <p style="font-size: 12px; color: #888; margin-top: 10px;">
                Actualizado: 03/02/2026 14:49
            </p>
        </div>
    </div>

    <!-- MODAL PARA DETALLES -->
    <div id="modalDetalle" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="cerrarModal()">&times;</span>
            <div id="modalContenido"></div>
        </div>
    </div>

    
    <script>
        // Gr√°fico de CO‚ÇÇ
        const traceCO2 = {
            x: ["Julio 2026", "Noviembre 2026"],
            y: [48.14, 1462.99],
            type: 'scatter',
            mode: 'lines+markers',
            name: 'CO‚ÇÇe Evitado (kg)',
            line: {color: '#1F7A3E', width: 3},
            marker: {size: 8, color: '#2ecc71'}
        };
        
        const layoutCO2 = {
            title: 'Evoluci√≥n Mensual',
            xaxis: {title: 'Per√≠odo'},
            yaxis: {title: 'kg de CO‚ÇÇe'},
            plot_bgcolor: '#f8fff8',
            paper_bgcolor: 'white'
        };
        
        Plotly.newPlot('grafico-co2', [traceCO2], layoutCO2);
        
        // Gr√°fico de Puntaje
        const tracePuntaje = {
            x: ["Julio 2026", "Noviembre 2026"],
            y: [1.8, 62.3],
            type: 'scatter',
            mode: 'lines+markers',
            name: 'Puntaje (%)',
            line: {color: '#8B7355', width: 3},
            marker: {size: 8, color: '#F5E6D3'},
            fill: 'tozeroy',
            fillcolor: '#F5E6D380'
        };
        
        const layoutPuntaje = {
            title: 'Tendencia de Sostenibilidad',
            xaxis: {title: 'Per√≠odo'},
            yaxis: {title: 'Puntaje (%)', range: [0, 100]},
            plot_bgcolor: '#f8fff8',
            paper_bgcolor: 'white'
        };
        
        Plotly.newPlot('grafico-puntaje', [tracePuntaje], layoutPuntaje);
        
        // Gr√°fico de Eficiencia
        const eficienciaData = {
            labels: ['Desperdicio por Plato', 'Huella H√≠drica', 'Energ√≠a Solar'],
            values: [
                0,
                0,
                0
            ],
            type: 'pie',
            marker: {colors: ['#FFD8B1', '#D1ECF1', '#D4EDDA']}
        };
        
        Plotly.newPlot('grafico-eficiencia', [eficienciaData], {title: 'Distribuci√≥n'});
        
        // Gr√°fico de Econom√≠a Circular
        const circularData = {
            x: ['Tasa Desviaci√≥n', 'Tela Reutilizada', 'Pl√°stico Recuperado'],
            y: [
                0,
                0,
                0
            ],
            type: 'bar',
            marker: {color: '#8B7355'}
        };
        
        Plotly.newPlot('grafico-circular', [circularData], {title: 'M√©tricas Circulares'});
        
        // Interactividad
        function mostrarDetalle(tipo) {
            const modal = document.getElementById('modalDetalle');
            const contenido = document.getElementById('modalContenido');
            
            let titulo = '';
            let detalles = '';
            
            switch(tipo) {
                case 'impacto':
                    titulo = 'üìà Detalles del Impacto';
                    detalles = 'El impacto promedio mide la sostenibilidad general de la empresa. Incluye m√©tricas ambientales, sociales y digitales.';
                    break;
                case 'co2':
                    titulo = 'üåç Detalles de CO‚ÇÇe';
                    detalles = 'CO‚ÇÇ equivalente evitado a trav√©s de pr√°cticas sostenibles como reciclaje, eficiencia energ√©tica y transporte limpio.';
                    break;
                case 'material':
                    titulo = '‚ôªÔ∏è Detalles de Material Recuperado';
                    detalles = 'Material recuperado incluye pl√°stico, papel, tela, tecnolog√≠a y otros materiales que se han reutilizado o reciclado.';
                    break;
                case 'evolucion':
                    titulo = 'üöÄ Detalles de Evoluci√≥n';
                    detalles = 'La tendencia muestra el crecimiento o decrecimiento del puntaje de sostenibilidad a lo largo del tiempo.';
                    break;
            }
            
            contenido.innerHTML = `
                <h3 style="color: #8B7355; margin-bottom: 20px;">${titulo}</h3>
                <div class="modal-details">
                    <p>${detalles}</p>
                    <p style="margin-top: 15px; font-size: 14px; color: #666;">
                        <strong>√öltima actualizaci√≥n:</strong> 03/02/2026 14:49
                    </p>
                </div>
            `;
            
            modal.style.display = 'block';
        }
        
        function mostrarDetalleMetrica(metrica) {
            const modal = document.getElementById('modalDetalle');
            const contenido = document.getElementById('modalContenido');
            
            let valor = {};
            let titulo = metrica.replace('_', ' ').title();
            let descripcion = '';
            
            if(metrica.includes('Desperdicio')) {
                descripcion = 'Mide la eficiencia en el manejo de alimentos. Un valor menor indica mayor eficiencia.';
            } else if(metrica.includes('Tasa')) {
                descripcion = 'Porcentaje de residuos que se desv√≠an del relleno sanitario mediante reciclaje y compostaje.';
            } else if(metrica.includes('Inversion')) {
                descripcion = 'Inversi√≥n total en proyectos de conservaci√≥n ambiental y social.';
            } else if(metrica.includes('Proveedores')) {
                descripcion = 'Porcentaje de proveedores que implementan pr√°cticas regenerativas y sostenibles.';
            } else if(metrica.includes('Participacion')) {
                descripcion = 'Nivel de participaci√≥n del personal en programas de reutilizaci√≥n y sostenibilidad.';
            } else if(metrica.includes('Huella')) {
                descripcion = 'Consumo total de agua en metros c√∫bicos. Incluye uso directo e indirecto.';
            } else if(metrica.includes('Tela')) {
                descripcion = 'Cantidad de tela reutilizada o reciclada, evitando la producci√≥n de nueva tela.';
            } else if(metrica.includes('Plastico')) {
                descripcion = 'Cantidad de pl√°stico recuperado y reciclado, reduciendo la contaminaci√≥n pl√°stica.';
            } else if(metrica.includes('Horas')) {
                descripcion = 'Total de horas de voluntariado dedicadas a proyectos ambientales y sociales.';
            }
            
            contenido.innerHTML = `
                <h3 style="color: #8B7355; margin-bottom: 20px;">${titulo}</h3>
                <div class="modal-details">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <div style="font-size: 48px; color: #8B7355; font-weight: bold;">${valor[metrica]}</div>
                        <div style="color: #666; margin-top: 10px;">${metrica.split('_')[-1]}</div>
                    </div>
                    <p>${descripcion}</p>
                    <p style="margin-top: 15px; font-size: 14px; color: #666;">
                        <strong>Impacto:</strong> Esta m√©trica contribuye directamente al puntaje de sostenibilidad.
                    </p>
                </div>
            `;
            
            modal.style.display = 'block';
        }
        
        function cerrarModal() {
            document.getElementById('modalDetalle').style.display = 'none';
        }
        
        // Cerrar modal al hacer clic fuera
        window.onclick = function(event) {
            const modal = document.getElementById('modalDetalle');
            if(event.target == modal) {
                modal.style.display = 'none';
            }
        }
        
        // Efectos de hover para m√©tricas
        document.querySelectorAll('.metrica-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px)';
            });
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });
        
        console.log('üìä Dashboard interactivo cargado para arcor');
    </script>
    
</body>
</html>